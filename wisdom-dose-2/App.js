import React, { useState, useEffect } from "react";
import {
  StyleSheet,
  View,
  Text,
  TouchableOpacity,
  ActivityIndicator,
  SafeAreaView,
  Alert,
  Share,
  TextInput,
  Platform,
} from "react-native";

import AsyncStorage from "@react-native-async-storage/async-storage";
import * as Clipboard from "expo-clipboard";
import { FontAwesome } from "@expo/vector-icons";

// --------------------------------------------------
// QUOTES
// --------------------------------------------------
const QUOTES = [
  "الصبر مفتاح الفرج.",
  "الصبر مفتاح الفرج.",
"لا يضيع الله أجر من أحسن عملاً.",
"ابتسم للحياة تبتسم لك.",
"من جدّ وجد ومن زرع حصد.",
"اعمل بصمت ودع نجاحك يتحدث.",
"ما أجمل أن تلتزم الصمت حين يتحدث الجهل.",
"ليس كل ما يلمع ذهبًا.",
"الأيام دول.",
"العبرة بالنهاية.",
"من صبر نال.",
"إنما الأعمال بالنيات.",
"من تواضع لله رفعه.",
"إذا طُعنت من الخلف فاعلم أنك في المقدمة.",
"الكلمة الطيبة صدقة.",
"العقل زينة.",
"من سار على الدرب وصل.",
"خير الكلام ما قلّ ودلّ.",
"احمد الله على ما أنت عليه.",
"لا يؤخر الله أمرًا إلا لخير.",
"النجاح رحلة وليس محطة.",
"لا تستسلم، فالبدايات دائمًا صعبة.",
"تجاهل من يحاول إحباطك.",
"لا تقارن نفسك بأحد.",
"الابتسامة لا تكلف شيئًا.",
"اجعل قلبك نقيًا.",
"من خاف الله لم يظلم أحدًا.",
"لا حياة مع اليأس ولا يأس مع الحياة.",
"الهدوء نصف السعادة.",
"الوقت كالسيف إن لم تقطعه قطعك.",
"السعادة قرار.",
"العقل السليم في الجسم السليم.",
"عامل الناس كما تحب أن يعاملوك.",
"قليل مستمر خير من كثير منقطع.",
"لا شيء يستحق القلق.",
"إن بعد العسر يسرًا.",
"لا تحزن فالله معنا.",
"من طلب العلى سهر الليالي.",
"الرضا كنز لا يفنى.",
"إذا لم تستطع قول الحق فلا تصفق للباطل.",
"الصمت لغة العظماء.",
"عش بسيطًا تعش سعيدًا.",
"النجاح يحتاج إلى صبر وثبات.",
"الصديق وقت الضيق.",
"الباب الذي يأتيك منه الريح سده واسترح.",
"العافية تاج على رؤوس الأصحاء.",
"الأيام كفيلة بكشف كل شيء.",
"لكل مجتهد نصيب.",
"الوفاء عملة نادرة.",
"لا تندم على خير فعلته.",
"الحياة تجارب.",
"من وثق بالله أغناه.",
"حسن الظن راحة للقلب.",
"اللهم اجعل لي في درب الحياة نورًا.",
"من خان مرة يخون ألف مرة.",
"الحق يعلو ولا يُعلى عليه.",
"ليست كل خسارة نهاية.",
"اصنع لنفسك قيمة.",
"القلوب بيد الله.",
"لا تؤجل عمل اليوم إلى الغد.",
"من عرف قدر نفسه ما ظلم غيره.",
"العبرة في المضمون لا في الشكل.",
"احفظ لسانك.",
"من كثرت ابتسامته قلت همومه.",
"العفو عند المقدرة.",
"ما أجمل أن تكون بسيط القلب.",
"إذا عزّ أخوك فهن.",
"الصمت حكمة.",
"من أحبّك لا يدعك تنهار.",
"لا تثق بكل من يضحك لك.",
"الحياة قصيرة فلا تضيعها.",
"لا خير في لذة تعقب ندمًا.",
"اعمل لآخرتك كأنك تموت غدًا.",
"من أحب شيئًا أكثر من ذكره.",
"لا شيء يبقى كما هو.",
"التجربة خير برهان.",
"أحسن إلى الناس تستعبد قلوبهم.",
"عش يومك ولا تنتظر الغد.",
"احترامك لنفسك يجعل الآخرين يحترمونك.",
"النجاح لا يأتي صدفة.",
"القلوب الطيبة لا تتغير.",
"لا تتعلق بشيء فكل شيء يزول.",
"ليس كل صامت راضٍ.",
"العمر لحظة.",
"اليقين بالله راحة.",
"النوايا الطيبة تجلب لك الخير.",
"لا تجادل الأحمق.",
"من توكل على الله كفاه.",
"الوعي بداية التغيير.",
"السعادة بداخلك.",
"من جدّ واجتهد ثابر وارتقى.",
"الكراهية تقتل صاحبها.",
"ابتعد عن كل ما يؤذيك.",
"الرحمة صفة العظماء.",
"الكلمة مسؤولية.",
"من ظن بالله خيرًا وجده.",
"القلب الذي يشكر لا يشكو.",
"كن أنت لا نسخة من غيرك.",
"ما أصابك لم يكن ليخطئك.",
"الحياة ليست سباقًا.",
"النجاح يحتاج نية وعمل.",
"ابتسم رغم الألم.",
"لا تحكم على أحد من شكله.",
"من عرف نفسه لم يضره ما قيل عنه.",
"لا تتردد في فعل الخير.",
"التغيير يبدأ من الداخل.",
"الصديق الحقيقي نادر.",
"الحكمة ضالة المؤمن.",
"لا تكبر عليك أحلامك.",
"الإصرار يصنع المعجزات.",
"افعل الخير دون انتظار مقابل.",
"السعادة ليست مكانًا بل شعور.",
"كل شيء يحدث لسبب.",
"احمد الله على ما فات وما هو آت.",
"العفو شيمة الكرام.",
"لا تتوقع من الجميع فهمك.",
"العطاء بركة.",
"خذ بالأسباب وتوكل على الله.",
"راحة البال أثمن من الذهب.",
"من ظن أنه بلغ فقد بدأ ينقص.",
"المحبة فعل وليست كلمة.",
"التسرع ندم.",
"من وضع ثقته في الله لن يخيب.",
"الاعتذار قوة وليس ضعفًا.",
"التواضع يجعلك أجمل.",
"السكون لغة أخرى للحكمة.",
"احرص على من يحبك بصدق.",
"لا تطلب الاهتمام، كن كافيًا لنفسك.",
"الصبر بوابة الفرج.",
"استر عيب غيرك يستر الله عيبك.",
"لا تخبر أحدًا بكل شيء.",
"اجعل قلبك أبيض.",
"من أهان الناس أهان نفسه.",
"التفاؤل عبادة.",
"لا ترهق نفسك بإرضاء الجميع.",
"الأيام تعلمنا أكثر من الكتب.",
"لا تستهن بكلمة طيبة.",
"المحبة لا تباع ولا تشترى.",
"الجروح تعلمنا.",
"تجاهل لتعيش.",
"النضج لا يأتي بالعمر.",
"ليس كل من يضحك سعيد.",
"احلم وكأنك تعيش أبداً.",
"العدل أساس الملك.",
"الراحة في البعد عن كل مؤذٍ.",
"السعادة تبدأ بك.",
"كل تأخير فيه خير.",
"التواضع يرفعك.",
"القلوب عند بعضها.",
"من جاد ساد.",
"قل خيرًا أو اصمت.",
"ليس في كل مرة تسلم الجرة.",
"الصدفة خير من ألف ميعاد.",
"البعيد عن العين بعيد عن القلب.",
"أحبب حبيبك هونًا ما.",
"خير الأمور أوسطها.",
"لا تؤجل أفراحك.",
"كن قويًا لأجلك.",
"المروءة في الوفاء.",
"الكرم يغطي العيوب.",
"لا تنظر للخلف.",
"اللسان مرآة القلب.",
"عندما تتغير نظرتك تتغير حياتك.",
"من رضي عاش سعيدًا.",
"لا تخسر ذاتك وأنت تحاول إرضاء الآخرين.",
"كل باب يغلق يفتح الله غيره.",
"التجاهل علاج.",
"من خاف سلم.",
"ابتعد عن الدراما تعش مرتاحًا.",
"التجارب تصنع منك شخصًا أقوى.",
"لا تجعل الماضي يكسرك.",
"النفوس الطيبة لا تتغير.",
"الكلمة تؤذي كما السيف.",
"من أحب بصدق لا ينسى.",
"لا تيأس مهما طال البلاء.",
"ما خاب من قال يا رب.",
"الثقة بالنفس بداية الإنجاز.",
"الغضب عدو الحكمة.",
"العزلة راحة.",
"من عاند طبعك ابتعد عنه.",
"التفكير الزائد سم.",
"من بخل بماله بخل براحتك.",
"ابتسم رغم التعب.",
"القلوب الطيبة تُجرح أكثر.",
"ليس كل ما نفقده خسارة.",
"انشغل بنفسك يصلح حالك.",
"لا ترهق نفسك بحثًا عن تفسير.",
"الزمن كفيل بكل شيء.",
"أشكر ربك في السراء والضراء.",
"الوحدة ليست دائمًا سيئة.",
"احلم ثم اعمل.",
"حتى ينقطع النفس لا تستسلم.",
"علم نفسك الرضا.",
"لا تخبر الناس بنقصك.",
"ما دام قلبك طيبًا سيعوضك الله.",
"قدر نفسك حق قدرها.",
"إذا أحب الله عبدًا ألهمه حسن الظن.",
"لا تبحث عن الكمال.",
"الصديق نعمة.",
"ما كتب لك سيأتيك ولو بعد حين.",
"الاهتمام نصف الحب.",
"الاحترام أساس كل علاقة.",
"الجمال جمال الأخلاق.",
"ما أجمل أن تعطي دون أن تنتظر شيئًا.",
"السعادة ليست امتلاك كل شيء بل القناعة بما لديك.",
"لا تتعلق بأحد، فكلهم ذاهبون.",
"الكلام الجميل يترك أثرًا طويلًا.",
"من حفظ لسانه سلم.",
"اجعل قلبك صافيًا كالماء.",
"لا تبحث عن التبرير لمن لا يستحق.",
"أحسن الظن دائماً.",
"من ظلمه الناس نصره الله.",
"احذر من الكريم إذا غضب.",
"لا تعاتب كثيرًا.",
"من باعك مرة لا تشتريه ثانية.",
"الأيام كفيلة بأن تظهر الحقائق.",
"لا تنظر للناس بعين نقصك.",
"النية الطيبة تصنع المعجزات.",
"احفظ سرك.",
"من راقب الناس مات همًا.",
"تجاهل لتنجو.",
"الإيمان قوة.",
"كل شيء مكتوب بقدر.",
"الرحمة فوق العدل.",
"الهدوء نعمة.",
"تفاءل خيرًا.",
"الحنين مؤلم.",
"من أحبك أكرمك.",
"من ظلمك لا تكن مثله.",
"الصديق الصالح كنز.",
"اعمل بصمت.",
"من جرب المجرب عقله مخرب.",
"الاعتراف بالخطأ فضيلة.",
"الزعل يضيع العمر.",
"من توهم المعالي وصل.",
"اجعل لنفسك هيبة.",
"القلوب كالطيور تهجر الألم.",
"لا تقطع وعدًا لا تستطيع الوفاء به.",
"البساطة أجمل.",
"من خاف الله أمن.",
"لا تفسر صمتي بالغضب.",
"من أرادك سأل عنك.",
"التجاهل أحيانًا احترام للنفس.",
"تأمل لتفهم.",
"كل شيء يرحل إلا النية الطيبة.",
"شكرًا لمن منحنا درسًا ولم يشعر.",
"القلوب لا تُقاس بالأشكال.",
"لا تتسرع في الحكم.",
"من عاش بوجهين مات بلا وجه.",
"الحياء تاج.",
"إذا أحب الله عبدًا نقى قلبه.",
"النية الحسنة طريق النجاة.",
"ابتسم وتجاوز.",
"العطاء سر السعادة.",
"لا تتعلق بالأشخاص، تعلّق بالله.",
"القلب الأبيض لا يخون.",
"لا توجع قلبك بالبحث عن الإجابات.",
"المحبة الحقيقية لا تسقط.",
"ما أجمل أن تعيش بقلب نقي.",
"الصمت لا يعني الانهزام.",
"من خذلته ظنونه عاش مرتاحًا.",
"اسعَ لفعل ما تحب.",
"القلب القاسي لا يسعد.",
"لا ترهق نفسك بالتوقعات.",
"أجمل النفوس تلك المتصالحة مع ذاتها.",
"لا تعرض نفسك للمواقف المؤذية.",
"البدايات مخيفة لكن النهايات جميلة.",
"ابحث عن الراحة في نفسك.",
"من عرف قيمتك لم يفرط بك.",
"لا تمنح وقتك لمن لا يستحق.",
"الكلمة الحلوة تعيش طويلًا.",
"ليست كل خسارة تُبكَى.",
"من سار على نية طيبة كُفي.",
"الأمل دواء القلوب.",
"ما تزرعه اليوم تحصده غدًا.",
"الماضي درس وليس مسكنًا.",
"لا تطلب من الحياة أكثر مما تعطي.",
"الأيام كفيلة بأن تداوي الجروح.",
"اجعل لكل شيء حدًا.",
"لا تصدق كل ما يُقال.",
"من تصدق لله رزقه الله.",
"المحبة ليست كلامًا بل موقف.",
"لا تظلم أحدًا.",
"ليكن قلبك هادئًا.",
"ما دامت نيتك طيبة لا تخف.",
"إن ضاقت عليك الأرض فسيفتحها الله.",
"النفوس الكريمة لا تعرف الحقد.",
"ليس كل صامت راضٍ.",
"تجنب الجدال العقيم.",
"لا تُظهر ضعفك إلا لله.",
"لا تضيع وقتك مع من لا يبالي.",
"الأخلاق عنوان.",
"الراحة في البعد عن سوء الظن.",
"من رضي بحاله عاش ملكًا.",
"النفس الطيبة تجذب الجميل.",
"اجعل قلبك بيتًا للرحمة.",
"ما أجمل أن تحسن الظن بالله.",
"اترك أثرًا طيبًا.",
"من صان لسانه صانه.",
"لا تنخدع بالمظاهر.",
"من أحبك لم يؤجل الحديث معك.",
"البلاء يمحو الخطايا.",
"لا يوجد أجمل من قلب عرف معنى الرحمة.",
"الصمت دواء الحكمة.",
"ما أجمل أن تتجاهل لتعيش.",
"النية الطيبة تجلب لك أطيب الناس.",
"لا تبحث عن الراحة في الآخرين.",
"القلب الذي يعرف الله لا يخاف.",
"تفاءل، فالله قادر على كل شيء.",
"اجعل أخلاقك عنوانك.",
"كل شيء يُعوّض إلا الوقت.",
"من فهم الحياة ابتسم لها.",
"العزلة أحيانًا راحة من ضجيج القلوب.",
"لا تتعلق إلا بالله.",
"لا تخبر الناس بما تفكر.",
"الرحمة من صفات الأقوياء.",
"كل شيء يبدأ بنية.",
"النقاء ليس ضعفًا.",
"اجعل كلماتك طيبة.",
"الجروح تعلم الإنسان الصبر.",
"لا تفكر كثيرًا فالأقدار مكتوبة.",
"الإحسان جميل حتى لو لم يُقدَّر.",
"القلوب البيضاء تبقى بيضاء.",
"التقدير لا يُطلب.",
"لا تقلق على شيء تركته لله.",
"النية الحسنة تجلب رزقًا حسنًا.",
"تقدم خطوة، فالحياة قصيرة.",
"ليست كل الطرق تؤدي للراحة.",
"العبرة بالنوايا.",
"اللهم ارزقنا راحة البال.",
"أبعد الله عنك من ليس لك خيرًا.",
"السعادة في البساطة.",
"اجعل قلبك كبيرًا.",
"من عرف الله لم يشقَ.",
"من يسامح يربح.",
"اجعل لنفسك قيمة.",
"لا تكن قاسيًا فالحياة قاسية بما يكفي.",
"الكلمة الجميلة أجمل من الذهب.",
"ما خاب من توكل.",
"الصمت قوة.",
"ليس كل ابتعاد كرهاً.",
"العلاقات الطيبة نعمة.",
"من عاش بالرضا عاش سعيدًا.",
"من ترك شيئًا لله عوضه الله.",
"لا ترهق نفسك بأفكار الآخرين.",
"القلب الهادئ جنة.",
"لا أحد يستحق أن تحزن لأجله طويلًا.",
"الاحترام أساس كل شيء.",
"الأيام توضح المقاصد.",
"النفوس الطيبة تلتقي.",
"لا تثق في كل مُبتسم.",
"الظلم يُهلك صاحبه.",
"السكوت لا يعني الضعف.",
"من يقدرك لا يجرحك.",
"العفو راحة.",
"ما أجمل أن تبقى طيب القلب.",
"تعامل بالأخلاق لا بالمثل.",
"النية الطيبة طريق السعادة.",
"ما دام قلبك بخير فأنت بخير.",
"لا تعلق سعادتك بالناس.",
"أكرم نفسك.",
"لا تيأس من روح الله.",
"من كانت بدايته صعبة كانت نهايته جميلة.",
"ثق بالله ثم بنفسك.",
"الأمل حياة.",
"الكلمة قد تبني وقد تهدم.",
"الغفران رفعة.",
"لا تبحث عن المقابل.",
"الناس تتغير، فاثبت أنت.",
"لا تؤذِ أحدًا بكلامك.",
"القلب الطيب لا يكره.",
"الحياة لا تتوقف على أحد.",
"لا تتعلق كثيرًا فكل شيء يتبدل.",
"السعادة بسيطة جدًا.",
"لا تسمح لأحد بإطفاء نورك.",
"افعل الخير بنية صافية.",
"لا تبرر كثيرًا.",
"للرضا طعم لا يعرفه إلا من جربه.",
"النية أساس العمل.",
"من عرف قدر نفسه ارتاح.",
"الصبر دواء كل ألم.",
"اجعل أيامك مليئة بالابتسامة.",
"الوعد دين.",
"لا ترهق نفسك بالقيل والقال.",
"انظر للحياة بجانبها المشرق.",
"البساطة أجمل الأشياء.",
"من أحبك سيدعمك.",
"اجعل قلبك نظيفًا.",
"كل شيء يمر.",
"لا شيء دائم سوى الله.",
"أحسن الاختيار.",
"سامح لتستريح.",
"لا تطلب المستحيل من الناس.",
"الاهتمام فعل لا قول.",
"لا تجعل أحدًا يكسرك.",
"الأرزاق بيد الله.",
"كن لطيفًا حتى مع نفسك.",
"الحياة فرصة واحدة.",
"من عامل الناس بأخلاقه ارتاح.",
"ابحث عن جمال يومك.",
"الكلمة الطيبة بركة.",
"لا ترهق قلبك بالحنين.",
"من أحبك لا ينسى شعورك.",
"اجعل يومك أفضل من أمسك.",
"لا تتوقف عن الحلم.",
"لا تخذل من وثق بك.",
"ابتسم فالله يدبر أمورك.",
"لا تحزن، فالله أرحم من الجميع.",
"السعادة قرار، وليست انتظارًا.",
"اجعل قلبك معلقًا بالله.",
"أحسن عملك ولا تنتظر الثناء.",
"من أحسن سريرته أحسن الله علانيته.",
"لا تندم على لحظة صدق.",
"من ترك شيئًا لله أبدله الله خيرًا منه.",
"اجعل همك رضا الله.",
"الكلمة الجميلة صدقة.",
"من عاش بالحب عاش عظيمًا.",
"لا تستسلم مهما تعثرت.",
"القلب الذي يتوكل على الله مطمئن.",
"لا تبحث عن من لا يبحث عنك.",
"من عرف هدفه عرف طريقه.",
"اجعل يومك مليئًا بالعطاء.",
"الخير يعود لصاحبه.",
"تفاءل حتى لو ضاقت بك الدنيا.",
"الراحة في حسن الظن بالله.",
"اصبر، فبعد الصبر يأتي الفرج.",
"لا تظلم أحدًا.",
"اجعل أحلامك أكبر من مخاوفك.",
"ما أجمل الرضا بالقضاء.",
"لا تتعلق إلا بالله فهو الثابت الوحيد.",
"تعلم أن تقول لا.",
"كل ما تفعله سيعود إليك.",
"عامل الناس بذوق.",
"تذكر أن الله معك.",
"من عاش لله عاش مطمئنًا.",
"لا تحمل قلبك فوق طاقته.",
"ابتعد عن كل ما يحزنك.",
"لا تجعل الماضي يسرق مستقبلك.",
"الخير طريق لا يضيع.",
"الحكمة ضياء.",
"الصمت في وقت الألم قوة.",
"من توكل على الله كفاه.",
"اجعل العمل أولًا والحديث أخيرًا.",
"لا تيأس من رحمة الله.",
"القلب الذي يعرف العطاء لا يكره.",
"عامِل الناس بما تحب أن يعاملوك.",
"تجنب أصحاب القلوب السوداء.",
"العزلة أحيانًا دواء.",
"النية الطيبة تفتح لك ألف باب.",
"اجعل روحك خفيفة.",
"من لا يعرف قيمتك لا يستحقك.",
"سامح من أجل قلبك.",
"كلما زاد تفكيرك قل راحة قلبك.",
"تعلم أن ترحل بهدوء.",
"لا تخبر الناس بكل ما في قلبك.",
"الراحة في ترك المتوقع.",
"من أحبك بصدق لن يتغير.",
"الأيام تعلمك من يستحق.",
"اعمل بصمت ودع النتائج تتحدث.",
"لا تبحث عن الكمال.",
"اجعل قلبك بياضًا مهما أظلمت الدنيا.",
"من حفظ الله حفظه.",
"التجارب تصقل الروح.",
"احمد الله دائمًا.",
"من سعى إلى الخير رزقه الله.",
"امضِ ولا تلتفت.",
"لا تكسر قلبًا حتى لو كان قاسيًا.",
"من يزرع المعروف يحصد المحبة.",
"اهتم بنفسك أولًا.",
"لا تتعلق بأحد وكلّ أمرك لله.",
"الوعد أمانة.",
"لا تتوقع من كل شخص فهمك.",
"اجعل نيتك خيرًا دائمًا.",
"لا تكثر الكلام.",
"الوفاء عملة نادرة.",
"الايام تكشف الصادق من المدّعي.",
"لا تجرح أحدًا بلطف كلماتك.",
"كن عونًا للناس.",
"لا تشارك حزنك مع الجميع.",
"من جبر خاطر الناس جبر الله خاطره.",
"اجعل دعائك سرًا.",
"لا تسأل كثيرًا عن الأسباب.",
"القلب الطيب مكسب.",
"لا تضيع وقتك في علاقات مؤقتة.",
"الرضا يجعل كل شيء جميلًا.",
"من أحبّك بصدق لن يتخلى عنك.",
"القناعة راحة.",
"لا تؤجل سعادتك.",
"التغيير يبدأ من قرار.",
"كل شيء يعوض إلا المشاعر.",
"اجعل قلبك حرًا من الحقد.",
"الإنسان بلا أخلاق لا شيء.",
"لا ترهق نفسك بما لا تستحق.",
"من خاف الله عاش مرتاحًا.",
"اجعل لطفك عادة.",
"من تواضع رفعه الله.",
"القلب الصادق لا يخون.",
"لا تستهين بنعمة الهدوء.",
"احمد الله على كل حال.",
"ما أجمل أن تبقى بسيطًا رغم كل شيء.",
"الصبر أجمل الهدايا.",
"من يراك عبئًا لا يراك نعمة.",
"لا تبحث عن رضا الجميع.",
"اجعل خطواتك ثابتة.",
"كل شيء مكتوب بميزان.",
"لا تترك قلبك في يد أحد.",
"اجعل حياتك أسهل بالرضا.",
"لا تنسَ نصيبك من الابتسامة.",
"الحياة قصيرة فلا تضيعها بالحزن.",
"اللهم ارزقنا راحة بال لا تزول.",

  "من صبر نال.",
];

// --------------------------------------------------
// LUXURY DARK GOLD THEME
// --------------------------------------------------
const THEME = {
  bg: "#0a0a0a",
  card: "#1a1a1a",
  text: "#fffaf0",
  accent: "#a67c00",
  accent2: "#c9a84e",
  accent3: "#7d5c0b",
  danger: "#d9534f",
};

// --------------------------------------------------
// MAIN APP
// --------------------------------------------------
export default function App() {
  const colors = THEME;

  const [screen, setScreen] = useState("main");
  const [quote, setQuote] = useState("");
  const [loading, setLoading] = useState(true);
  const [favorites, setFavorites] = useState([]);
  const [search, setSearch] = useState("");

  useEffect(() => {
    (async () => {
      const stored = await AsyncStorage.getItem("FAVS");
      if (stored) setFavorites(JSON.parse(stored));
    })();
    newQuote(true);
  }, []);

  useEffect(() => {
    if (screen !== "main") return;
    const timer = setInterval(() => newQuote(false), 15000);
    return () => clearInterval(timer);
  }, [screen]);

  const newQuote = (initial) => {
    if (!initial) setLoading(true);
    const index = Math.floor(Math.random() * QUOTES.length);
    setQuote(QUOTES[index]);
    setTimeout(() => setLoading(false), 250);
  };

  const toggleFavorite = async () => {
    let updated;
    if (favorites.includes(quote)) {
      updated = favorites.filter((q) => q !== quote);
      Alert.alert("تم", "تمت إزالة الحكمة.");
    } else {
      updated = [quote, ...favorites];
      Alert.alert("تم", "تم حفظ الحكمة.");
    }
    setFavorites(updated);
    await AsyncStorage.setItem("FAVS", JSON.stringify(updated));
  };

  const copyQuote = async () => {
    await Clipboard.setStringAsync(quote);
    Alert.alert("تم النسخ", "تم نسخ الحكمة.");
  };

  const shareQuote = async () => {
    await Share.share({ message: quote });
  };

  return (
    <SafeAreaView style={[styles.safe, { backgroundColor: colors.bg }]}>

      {/* HEADER ICONS */}
      <View style={styles.header}>
        <View style={styles.headerIcons}>
          {screen === "main" ? (
            <>
              <TouchableOpacity onPress={() => setScreen("settings")}>
                <FontAwesome name="cog" size={26} color={colors.accent2} />
              </TouchableOpacity>

              <TouchableOpacity onPress={() => setScreen("favorites")}>
                <FontAwesome name="star" size={26} color={colors.accent} />
              </TouchableOpacity>
            </>
          ) : (
            <TouchableOpacity onPress={() => setScreen("main")}>
              <FontAwesome name="arrow-right" size={26} color={colors.accent2} />
            </TouchableOpacity>
          )}
        </View>
      </View>

      {/* FULL CENTERED SCREEN */}
      <View style={styles.centerScreen}>

        {/* LOWERED TITLE */}
        <Text style={[styles.title, { color: colors.accent2 }]}>حِكمة</Text>

        <View
          style={{
            width: "40%",
            height: 4,
            backgroundColor: colors.accent,
            borderRadius: 50,
            marginTop: 10,
            marginBottom: 25,
          }}
        />

        {/* ROUTER */}
        {screen === "main" && (
          <MainView
            quote={quote}
            loading={loading}
            newQuote={newQuote}
            toggleFavorite={toggleFavorite}
            copyQuote={copyQuote}
            shareQuote={shareQuote}
            colors={colors}
          />
        )}

        {screen === "favorites" && (
          <FavoritesView
            favorites={favorites}
            search={search}
            setSearch={setSearch}
            colors={colors}
          />
        )}

        {screen === "settings" && <SettingsView colors={colors} />}
      </View>
    </SafeAreaView>
  );
}

// --------------------------------------------------
// MAIN VIEW
// --------------------------------------------------
const MainView = ({
  quote,
  loading,
  newQuote,
  toggleFavorite,
  copyQuote,
  shareQuote,
  colors,
}) => (
  <View style={{ width: "100%", alignItems: "center" }}>
    <View
      style={[
        styles.quoteCard,
        {
          backgroundColor: colors.card,
          borderColor: colors.accent2,
          shadowColor: colors.accent,
        },
      ]}
    >
      {loading ? (
        <ActivityIndicator size="large" color={colors.accent2} />
      ) : (
        <Text style={[styles.quoteText, { color: colors.text }]}>{quote}</Text>
      )}
    </View>

    <TouchableOpacity
      onPress={() => newQuote(false)}
      style={[
        styles.btnMain,
        {
          backgroundColor: colors.accent2,
          shadowColor: colors.accent,
        },
      ]}
    >
      <Text style={styles.btnMainText}>حكمة جديدة</Text>
    </TouchableOpacity>

    <View style={styles.row}>
      <IconBtn icon="star" color={colors.accent} onPress={toggleFavorite} />
      <IconBtn icon="share-alt" color={colors.accent2} onPress={shareQuote} />
      <IconBtn icon="copy" color={colors.danger} onPress={copyQuote} />
    </View>
  </View>
);

// --------------------------------------------------
// FAVORITES
// --------------------------------------------------
const FavoritesView = ({ favorites, search, setSearch, colors }) => {
  const filtered = favorites.filter((q) => q.includes(search));

  return (
    <View style={{ width: "100%" }}>
      <TextInput
        style={[
          styles.searchInput,
          {
            backgroundColor: colors.card,
            color: colors.text,
            borderColor: colors.accent3,
          },
        ]}
        placeholder="ابحث في المفضلة"
        placeholderTextColor="#888"
        onChangeText={setSearch}
        value={search}
      />

      {filtered.length === 0 ? (
        <Text style={{ color: colors.text, textAlign: "center", marginTop: 20 }}>
          لا توجد نتائج.
        </Text>
      ) : (
        filtered.map((q, i) => (
          <View
            key={i}
            style={[
              styles.favItem,
              {
                backgroundColor: colors.card,
                borderColor: colors.accent3,
                shadowColor: colors.accent2,
              },
            ]}
          >
            <Text style={[styles.favText, { color: colors.text }]}>{q}</Text>
          </View>
        ))
      )}
    </View>
  );
};

// --------------------------------------------------
// SETTINGS — UPDATED TEXT
// --------------------------------------------------
const SettingsView = ({ colors }) => (
  <View style={{ width: "100%", alignItems: "center" }}>
    <Text style={[styles.settingsTitle, { color: colors.accent2 }]}>
      الإعدادات
    </Text>

    <View
      style={[
        styles.settingsCard,
        {
          backgroundColor: colors.card,
          borderColor: colors.accent3,
          shadowColor: colors.accent3,
        },
      ]}
    >
      <Text style={[styles.settingsText, { color: colors.text }]}>
        • الإصدار: 1.0{"\n"}
        • e-mail: 0021800@gmail.com{"\n"}
        • تطبيق يقدم حكمًا قصيرة تحمل معاني عميقة لتمنحك إلهامًا وهدوءًا يوميًا
      </Text>
    </View>
  </View>
);

// --------------------------------------------------
// ICON BUTTON
// --------------------------------------------------
const IconBtn = ({ icon, color, onPress }) => (
  <TouchableOpacity
    style={[styles.iconBtn, { backgroundColor: color, shadowColor: color }]}
    onPress={onPress}
  >
    <FontAwesome name={icon} size={20} color="#fff" />
  </TouchableOpacity>
);

// --------------------------------------------------
// STYLES
// --------------------------------------------------
const styles = StyleSheet.create({
  safe: { flex: 1, writingDirection: "rtl" },

  header: {
    padding: 18,
    paddingTop: Platform.OS === "android" ? 40 : 18,
    alignItems: "center",
    position: "relative",
  },

  headerIcons: {
    position: "absolute",
    right: 20,
    flexDirection: "row",
    gap: 20,
  },

  title: {
    fontSize: 36,
    fontWeight: "900",
    letterSpacing: 2,
    marginBottom: 10,
  },

  centerScreen: {
    flex: 1,
    width: "100%",
    alignItems: "center",
    justifyContent: "center",
    paddingHorizontal: 20,
  },

  quoteCard: {
    width: "100%",
    padding: 40,
    borderRadius: 25,
    marginBottom: 35,
    borderWidth: 2,
    shadowOpacity: 0.5,
    shadowRadius: 18,
    shadowOffset: { width: 0, height: 10 },
  },

  // ⭐ BEAUTIFUL ARABIC QUOTE FONT
  quoteText: {
    fontSize: 32,
    lineHeight: 48,
    textAlign: "center",
    fontFamily: Platform.OS === "ios" ? "Geeza Pro" : "serif",
    fontWeight: "400",
    letterSpacing: 0.5,
  },

  btnMain: {
    paddingVertical: 16,
    paddingHorizontal: 50,
    borderRadius: 40,
    marginBottom: 25,
    shadowOpacity: 0.5,
    shadowRadius: 12,
    shadowOffset: { width: 0, height: 6 },
  },

  btnMainText: {
    fontSize: 20,
    fontWeight: "800",
    color: "#000",
  },

  row: { flexDirection: "row", marginTop: 10, gap: 15 },

  iconBtn: {
    width: 55,
    height: 55,
    borderRadius: 55,
    alignItems: "center",
    justifyContent: "center",
    shadowOpacity: 0.4,
    shadowRadius: 10,
    shadowOffset: { width: 0, height: 6 },
  },

  favItem: {
    padding: 20,
    marginVertical: 8,
    borderRadius: 18,
    borderWidth: 2,
    shadowOpacity: 0.4,
    shadowRadius: 10,
    shadowOffset: { width: 0, height: 8 },
  },

  favText: {
    fontSize: 19,
    lineHeight: 32,
    fontFamily: Platform.OS === "ios" ? "Geeza Pro" : "serif",
  },

  searchInput: {
    width: "100%",
    padding: 16,
    borderRadius: 18,
    borderWidth: 1,
    marginBottom: 20,
    fontSize: 17,
  },

  settingsTitle: {
    fontSize: 30,
    fontWeight: "900",
    marginBottom: 25,
    letterSpacing: 2,
  },

  settingsCard: {
    width: "100%",
    padding: 25,
    borderRadius: 20,
    borderWidth: 2,
    shadowOpacity: 0.3,
    shadowRadius: 12,
    shadowOffset: { width: 0, height: 8 },
  },

  settingsText: {
    fontSize: 18,
    lineHeight: 30,
    fontFamily: Platform.OS === "ios" ? "Geeza Pro" : "serif",
  },
});
